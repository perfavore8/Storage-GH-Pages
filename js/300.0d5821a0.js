"use strict";(self["webpackChunkstorage"]=self["webpackChunkstorage"]||[]).push([[300],{5300:function(e,s,t){t.d(s,{Z:function(){return Te}});var o=t(6252),l=t(3577),n=t(9963);const i=e=>((0,o.dD)("data-v-224c37ec"),e=e(),(0,o.Cn)(),e),c={key:0},a={key:1},d={class:"container"},_={class:"header"},u={class:"left"},p=i((()=>(0,o._)("div",{class:"title"},"Настройки документов",-1))),r={class:"autorization"},v=i((()=>(0,o._)("button",null,"Выйти",-1))),h={class:"right"},m={class:"modal_settings"},w={class:"content"},g={class:"binding"},b=i((()=>(0,o._)("div",{class:"header"},"Привязка полей документов",-1))),y={class:"main"},f=i((()=>(0,o._)("label",null,'Поле "Документы"',-1))),k={class:"patterns"},D=i((()=>(0,o._)("div",{class:"header"},[(0,o._)("div",null,"Шаблоны документов"),(0,o._)("div",{class:"small"}," Файлы шаблонов должны быть доступны для чтения по ссылке ")],-1))),C={class:"main"},x={class:"table"},S={class:"row title"},I=i((()=>(0,o._)("td",{class:"item"},null,-1))),O={class:"item"},j={class:"item"},q={class:"item"},z={href:"https://docs.google.com/spreadsheets/d/13U76ujSjV_iaY0L2WBVHVw7q07TSEqstuL0kSeX-Sh8/edit"},F={class:"item"},$={class:"item"},H={class:"item"},Y={class:"btns"},Z=["onClick"],V=i((()=>(0,o._)("div",{class:"icon"},null,-1))),W=[V],A=["onClick"],N=i((()=>(0,o._)("div",{class:"icon"},null,-1))),K=[N],E={class:"add_button_container"},T=i((()=>(0,o._)("div",{class:"icon"},null,-1))),U=[T],G={class:"footer"},L={class:"btns"};function B(e,s,t,i,V,N){const T=(0,o.up)("document-setting-add-new"),B=(0,o.up)("document-setting-fields"),M=(0,o.up)("SelectorVue");return(0,o.wg)(),(0,o.iD)(o.HY,null,[V.showAddNew?((0,o.wg)(),(0,o.j4)(T,{key:0,cur_doc:V.cur_doc,idx:V.selected_doc_idx,onClose:N.close_add_new,onSave_new_doc:N.save_new_doc,onSave_cur_doc:N.save_cur_doc},{title:(0,o.w5)((()=>[null===V.selected_doc_idx?((0,o.wg)(),(0,o.iD)("span",c," Добавление шаблона документов ")):(0,o.kq)("",!0),null!==V.selected_doc_idx?((0,o.wg)(),(0,o.iD)("span",a," Редактирование шаблона документов ")):(0,o.kq)("",!0)])),_:1},8,["cur_doc","idx","onClose","onSave_new_doc","onSave_cur_doc"])):(0,o.kq)("",!0),V.showFields?((0,o.wg)(),(0,o.j4)(B,{key:1,onClose:N.close_fields},null,8,["onClose"])):(0,o.kq)("",!0),(0,o._)("div",{class:"app",ref:"app",onClick:s[6]||(s[6]=e=>V.show_settings?N.close_settings():null)},[(0,o._)("div",d,[(0,o._)("div",_,[(0,o._)("div",u,[p,(0,o._)("div",r,[(0,o.Uk)(' Вы авторизированы в сервисе Google Drive как "'+(0,l.zw)(V.name)+'". ',1),v])]),(0,o._)("div",h,[(0,o._)("button",{class:"settings_btn",onClick:s[0]||(s[0]=(0,n.iM)((e=>N.open_close_settings()),["stop"]))}),(0,o.Wm)(n.uT,{name:"modal"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",m,[(0,o._)("a",null,[(0,o._)("div",{class:"modal_container",onClick:s[1]||(s[1]=e=>N.open_fields())}," Поля шаблонов ")]),(0,o._)("a",null,[(0,o._)("div",{class:"modal_container",onClick:s[2]||(s[2]=s=>e.open_edit_stuff())}," Обновить поля шаблонов ")])],512),[[n.F8,V.show_settings]])])),_:1})])]),(0,o._)("div",w,[(0,o._)("div",g,[b,(0,o._)("div",y,[f,(0,o.Wm)(M,{options_props:V.options,onSelect:N.option_select,selected_option:V.selected_option},null,8,["options_props","onSelect","selected_option"])])]),(0,o._)("div",k,[D,(0,o._)("div",C,[(0,o._)("table",x,[(0,o._)("thead",null,[(0,o._)("tr",S,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.title,(e=>((0,o.wg)(),(0,o.iD)("td",{class:"item",key:e},(0,l.zw)(e),1)))),128)),I])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.copy_documents,(e=>((0,o.wg)(),(0,o.iD)("tr",{class:"row",key:e},[(0,o._)("td",O,(0,l.zw)(e.name),1),(0,o._)("td",j,(0,l.zw)(e.serviceID),1),(0,o._)("td",q,[(0,o._)("a",z,(0,l.zw)(e.gauge),1)]),(0,o._)("td",F,(0,l.zw)(e.gouge_type),1),(0,o._)("td",$,(0,l.zw)(e.download_type),1),(0,o._)("td",H,[(0,o._)("div",Y,[(0,o._)("button",{class:"btn_edit",onClick:s=>N.open_edit(e)},W,8,Z),(0,o._)("button",{class:"btn_del",onClick:s=>N.delete_cur_doc(e)},K,8,A)])])])))),128))])]),(0,o._)("div",E,[(0,o._)("button",{class:"add_new_button",onClick:s[3]||(s[3]=e=>N.open_add_new())},U)])])])]),(0,o._)("div",G,[(0,o._)("div",L,[(0,o._)("button",{class:"btn btn1",onClick:s[4]||(s[4]=e=>N.close())},"Отмена"),(0,o._)("button",{class:"btn btn2",onClick:s[5]||(s[5]=e=>N.save())},"Сохранить")])])])],512)],64)}var M=t(9935);const X=e=>((0,o.dD)("data-v-34530426"),e=e(),(0,o.Cn)(),e),J={class:"app_new"},P={class:"container"},Q={class:"header"},R={class:"content"},ee={class:"label_input"},se=X((()=>(0,o._)("label",{class:"label"},"Название:",-1))),te={class:"label_input"},oe=X((()=>(0,o._)("label",{class:"label"},"Google ID файла:",-1))),le={class:"label_input"},ne=X((()=>(0,o._)("label",{class:"label"},"Тип шаблона:",-1))),ie={class:"label_input"},ce=X((()=>(0,o._)("label",{class:"label"},"Тип для скачивания:",-1))),ae={class:"footer"},de={class:"btns"};function _e(e,s,t,i,c,a){const d=(0,o.up)("selector-vue");return(0,o.wg)(),(0,o.iD)("div",J,[(0,o._)("div",P,[(0,o._)("div",Q,[(0,o.WI)(e.$slots,"title",{},void 0,!0)]),(0,o._)("div",R,[(0,o._)("div",ee,[se,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>c.name=e),class:(0,l.C_)(["input",{not_valid:c.try_accept&&""==c.name}])},null,2),[[n.nr,c.name]])]),(0,o._)("div",te,[oe,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=e=>c.serviceID=e),class:(0,l.C_)(["input",{not_valid:c.try_accept&&""==c.serviceID}])},null,2),[[n.nr,c.serviceID]])]),(0,o._)("div",le,[ne,(0,o.Wm)(d,{options_props:c.options1,onSelect:a.option_select1,selected_option:c.gouge_type},null,8,["options_props","onSelect","selected_option"])]),(0,o._)("div",ie,[ce,(0,o.Wm)(d,{options_props:c.options2,onSelect:a.option_select2,selected_option:c.download_type},null,8,["options_props","onSelect","selected_option"])])]),(0,o._)("div",ae,[(0,o._)("div",de,[(0,o._)("button",{class:"btn btn1",onClick:s[2]||(s[2]=e=>a.close_modal())},"Отмена"),(0,o._)("button",{class:"btn btn2",onClick:s[3]||(s[3]=e=>a.save())},"Сохранить")])])])])}var ue={components:{SelectorVue:M.Z},props:{cur_doc:{type:Object,required:!1,default(){return{}}},idx:{type:Number,required:!1,default(){return null}}},emits:{save_new_doc:null,close:null,save_cur_doc:null},data(){return{options1:[{name:"docx",value:1},{name:"xlsx",value:2}],gouge_type:{name:"docx",value:1},options2:[{name:"Исходный",value:1},{name:"pdf",value:2}],download_type:{name:"Исходный",value:1},try_accept:!1,name:"",serviceID:""}},mounted(){(0,o.Y3)((()=>this.add_cur_doc()))},methods:{save(){if(this.try_accept=!0,""!=this.name&&""!=this.serviceID){const e={name:this.name,serviceID:this.serviceID,gouge_type:this.gouge_type.name,download_type:this.download_type.name};Object.keys(this.cur_doc).length>0?this.$emit("save_cur_doc",e,this.idx):this.$emit("save_new_doc",e),this.close_modal()}},close_modal(){this.name="",this.serviceID="",this.$emit("close")},option_select1(e){Object.assign(this.gouge_type,e)},option_select2(e){Object.assign(this.download_type,e)},add_cur_doc(){if(Object.keys(this.cur_doc).length>0){this.name=this.cur_doc.name,this.serviceID=this.cur_doc.serviceID;const e=(e,s)=>{let t={};return e.forEach((e=>{e.name==s&&Object.assign(t,e)})),t};this.gouge_type=e(this.options1,this.cur_doc.gouge_type),this.download_type=e(this.options2,this.cur_doc.download_type)}}}},pe=t(3744);const re=(0,pe.Z)(ue,[["render",_e],["__scopeId","data-v-34530426"]]);var ve=re;const he=e=>((0,o.dD)("data-v-725d1acc"),e=e(),(0,o.Cn)(),e),me={class:"app_fileds"},we={class:"container"},ge={class:"header"},be=he((()=>(0,o._)("div",{class:"left"},[(0,o._)("label",null,"Поля для шаблонов документов")],-1))),ye={class:"right"},fe=he((()=>(0,o._)("div",{class:"icon"},null,-1))),ke=[fe],De={class:"content"},Ce={class:"top"},xe=["onClick"],Se={class:"bottom"},Ie={class:"footer"};function Oe(e,s,t,n,i,c){const a=(0,o.up)("document-setting-fileds-list");return(0,o.wg)(),(0,o.iD)("div",me,[(0,o._)("div",we,[(0,o._)("div",ge,[be,(0,o._)("div",ye,[(0,o._)("button",{class:"btn_del",onClick:s[0]||(s[0]=e=>c.close())},ke)])]),(0,o._)("div",De,[(0,o._)("div",Ce,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.documents_fields,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e,onClick:s=>c.select_catalog(e),class:(0,l.C_)(["title",{selected:e.name==i.selected_catalog}])},(0,l.zw)(e.name),11,xe)))),128))]),(0,o._)("div",Se,[(0,o.Wm)(a,{list:i.list},null,8,["list"])])]),(0,o._)("div",Ie,[(0,o._)("button",{class:"btn btn1",onClick:s[1]||(s[1]=e=>c.close())},"Назад")])])])}var je=t(3907);const qe={class:"list"},ze={class:"title"},Fe={class:"fields"},$e=["onClick"];function He(e,s,t,i,c,a){return(0,o.wg)(),(0,o.iD)("div",qe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.list,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"row",key:e},[(0,o._)("div",ze,(0,l.zw)(e.title),1),(0,o._)("div",Fe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.fields,(e=>((0,o.wg)(),(0,o.iD)("button",{class:"field",key:e,onClick:s=>a.copy(e.value)},(0,l.zw)(e.name),9,$e)))),128)),(0,o.wy)((0,o._)("span",null,null,512),[[n.F8,!1]])])])))),128))])}var Ye={props:{list:{type:Array,required:!0,default(){return[]}}},methods:{copy(e){navigator.clipboard.writeText(e).then((()=>{alert("Текст скопирован удачно")})).catch((()=>{alert("Текст не скопирован автоматически :с\nПопробуйте вручную")}))}}};const Ze=(0,pe.Z)(Ye,[["render",He],["__scopeId","data-v-0b4b3b86"]]);var Ve=Ze,We={emits:{close:null},components:{DocumentSettingFiledsList:Ve},data(){return{selected_catalog:"",list:[]}},computed:{...(0,je.Se)(["documents_fields"])},mounted(){this.documents_fields[0].name&&this.select_catalog(this.documents_fields[0])},methods:{select_catalog(e){this.selected_catalog=e.name,this.list=e.fields},close(){this.$emit("close")}}};const Ae=(0,pe.Z)(We,[["render",Oe],["__scopeId","data-v-725d1acc"]]);var Ne=Ae,Ke={components:{SelectorVue:M.Z,DocumentSettingAddNew:ve,DocumentSettingFields:Ne},data(){return{name:"Дмитрий Ивлев",title:["Название","Google ID файла","Шаблон","Тип шаблона","Тип для скачивания"],options:[{name:"Не выбрано",value:1},{name:"Прибыль",value:2},{name:"Бюджет общий",value:3}],selected_option:{name:"Не выбрано",value:1},showAddNew:!1,showFields:!1,show_settings:!1,cur_doc:{},selected_doc_idx:null,copy_documents:[]}},computed:{...(0,je.Se)(["documents"])},mounted(){this.copy_documents=[],this.copy_documents=this.copy_documents.concat(this.documents)},methods:{close(){this.copy_documents=[],this.$emit("close",!1)},save(){this.$store.commit("save_docs",this.copy_documents),this.close()},option_select(e){Object.assign(this.selected_option,e)},open_edit(e){Object.assign(this.cur_doc,e),this.selected_doc_idx=this.copy_documents.indexOf(e),this.open_add_new()},open_modal(){this.$refs.app.style.pointerEvents="none",this.$refs.app.style.filter="blur(5px)"},close_modal(){this.$refs.app.style.pointerEvents="all",this.$refs.app.style.filter="none"},open_add_new(){this.showAddNew=!0,this.open_modal()},close_add_new(){this.showAddNew=!1,this.cur_doc={},this.close_modal()},save_new_doc(e){this.copy_documents.push(Object.assign(e,{gauge:"редактировать"}))},save_cur_doc(e,s){Object.assign(this.copy_documents[s],e)},delete_cur_doc(e){const s=this.copy_documents.indexOf(e);this.copy_documents.splice(s,1)},open_close_settings(){this.show_settings=!this.show_settings},close_settings(){this.show_settings=!1},open_fields(){this.showFields=!0,this.open_modal()},close_fields(){this.showFields=!1,this.close_modal()}}};const Ee=(0,pe.Z)(Ke,[["render",B],["__scopeId","data-v-224c37ec"]]);var Te=Ee},9935:function(e,s,t){t.d(s,{Z:function(){return v}});var o=t(6252),l=t(3577),n=t(9963);const i={class:"v-select"},c={class:"options",key:"a1"},a=["onClick"];function d(e,s,t,d,_,u){return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",{class:(0,l.C_)(["title",{title_checked:d.show_options,disabled:t.disabled}]),onClick:s[0]||(s[0]=e=>d.open_close_options()),onFocusout:s[1]||(s[1]=(...e)=>d.handleFocusOut&&d.handleFocusOut(...e)),tabindex:"0"},[(0,o._)("p",null,(0,l.zw)(t.selected_option.name),1),t.disabled?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,l.C_)(["arrow",{rotate_arrow:d.show_options}])},null,2))],34),(0,o.Wm)(n.uT,{name:"list"},{default:(0,o.w5)((()=>[d.show_options?((0,o.wg)(),(0,o.iD)("div",c,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.options,(e=>((0,o.wg)(),(0,o.iD)("p",{key:e.value,onClick:s=>d.select_option(e)},(0,l.zw)(e.name),9,a)))),128))])):(0,o.kq)("",!0)])),_:1})])}var _=t(2262),u={props:{options_props:{type:Array,default(){return[]},required:!0},selected_option:{type:Object,required:!0,default(){return{}}},disabled:{type:Boolean,required:!1,default:!1},idx:{type:Number,required:!1}},emits:{select:null},setup(e,{emit:s}){const t=(0,_.iH)([]);(0,o.bv)((()=>{t.value=[],e.options_props.forEach((e=>t.value.push(e)))}));const l=(0,_.iH)(!1),n=()=>{l.value=!1},i=()=>{e.disabled||(l.value=!l.value)},c=()=>{n()},a=t=>{s("select",t,e.idx),n()};return{open_close_options:i,handleFocusOut:c,show_options:l,options:t,select_option:a}}},p=t(3744);const r=(0,p.Z)(u,[["render",d],["__scopeId","data-v-6e6fe5a6"]]);var v=r}}]);
//# sourceMappingURL=300.0d5821a0.js.map